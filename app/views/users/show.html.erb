<%= link_to "home", root_path %><br>
<%= link_to "create a new event", new_event_path %><br><br>

<%= @user.name %><br>
<%= @user.email %><br><br>

Created Events:<br>
<% @user.created_events.each do |e| %>
  <%= e.date %> -
  <%= e.time.to_s(:time) %> -
  <%= e.name %> -
  <%= e.description %>
  <%= form_with model: Ticket.new, local: true do |f| %>
    Invite a friend!
    <% users_without_tickets_for_event = User.where
            .not(id: e.tickets.map(&:attendee_id)) %>
    <%= f.select('attendee_id', users_without_tickets_for_event
         .collect { |u| [ u.name, u.id ] }) %>
    <%= f.hidden_field 'attended_event_id', value: e.id %>
    <%= f.submit 'Invite them!' %>
  <% end %><br>
<% end %><br>

<%= render partial: 'user_events', locals: { event_time: 'Today',
                                             event_date_direction: :asc,
                                             event_date_query: 'date = ?' } %>

<%= render partial: 'user_events', locals: { event_time: 'Future',
                                             event_date_direction: :asc,
                                             event_date_query: 'date > ?' } %>

<%= render partial: 'user_events', locals: { event_time: 'Past',
                                             event_date_direction: :desc,
                                             event_date_query: 'date < ?' } %>
